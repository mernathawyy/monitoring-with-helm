# ===============================
# Global Settings
# ===============================
global:
  storageClass: "standard"

# ===============================
# Grafana Settings
# ===============================
grafana:
  enabled: true
  adminUser: admin
  adminPassword: admin123
  service:
    type: NodePort
    nodePort: 32000
  persistence:
    enabled: false
  ingress:
    enabled: false
  smtp:
    enabled: true
    host: smtp.gmail.com:587
    user: mernathawy211@gmail.com
# ===============================
# Global Settings
# ===============================
global:
  storageClass: "standard"

# ===============================
# Grafana Settings
# ===============================
grafana:
  enabled: true
  adminUser: admin
  adminPassword: admin123
  service:
    type: NodePort
    nodePort: 32000
  persistence:
    enabled: false
  ingress:
    enabled: false

# ===============================
# Prometheus Settings
# ===============================
prometheus:
  enabled: true
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false

    # ðŸ”¥ Jenkins External Scrape
    additionalScrapeConfigs:
      - job_name: "jenkins-external"
        metrics_path: /prometheus
        scrape_interval: 15s
        static_configs:
          - targets:
              - 192.168.137.168:8080

    # ðŸ”¥ Jenkins Alert Rules
    additionalPrometheusRules:
      - name: jenkins-alerts
        groups:
          - name: jenkins.rules
            rules:
              - alert: JenkinsBuildFailed
                expr: jenkins_job_builds_failed_total > 0
                for: 1m
                labels:
                  severity: critical
                annotations:
# ===============================
# Global Settings
# ===============================
global:
  storageClass: "standard"

# ===============================
# Grafana Settings
# ===============================
grafana:
  enabled: true
  adminUser: admin
  adminPassword: admin123
  service:
    type: NodePort
    nodePort: 32000
  persistence:
    enabled: false
  ingress:
    enabled: false

# ===============================
# Prometheus Settings
# ===============================
prometheus:
  enabled: true
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false

    # ðŸ”¥ Jenkins External Scrape
    additionalScrapeConfigs:
      - job_name: "jenkins-external"
        metrics_path: /prometheus
        scrape_interval: 15s
        static_configs:
          - targets:
              - 192.168.137.168:8080

    # ðŸ”¥ Jenkins Alert Rules
    additionalPrometheusRules:
      - name: jenkins-alerts
        groups:
          - name: jenkins.rules
            rules:
              - alert: JenkinsBuildFailed
                expr: jenkins_job_builds_failed_total > 0
                for: 1m
                labels:
                  severity: critical
                annotations:
    password: "tbqe zwqb eigo vupk"  # Ù‡Ù†Ø§ Ø­Ø·ÙŠ App Password
    fromAddress: mernathawy211@gmail.com
    skipVerify: false
    ehloIdentity: "localhost"
    startTLS: true

# ===============================
# Prometheus Settings
# ===============================
prometheus:
  enabled: true
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false

    # ðŸ”¥ Jenkins External Scrape
    additionalScrapeConfigs:
      - job_name: "jenkins-external"
        metrics_path: /prometheus
        scrape_interval: 15s
        static_configs:
          - targets:
              - 192.168.137.168:8080

    # ðŸ”¥ Jenkins Alert Rules
    additionalPrometheusRules:
      - name: jenkins-alerts
        groups:
          - name: jenkins.rules
            rules:
              - alert: JenkinsBuildFailed
                expr: jenkins_job_builds_failed_total > 0
                for: 1m
                labels:
                  severity: critical
                annotations:
                  summary: "Jenkins Build Failed"
                  description: "One or more Jenkins builds have failed."
              - alert: JenkinsBuildSuccess
                expr: jenkins_job_builds_success_total > 0
                for: 1m
                labels:
                  severity: info
                annotations:
                  summary: "Jenkins Build Succeeded"
                  description: "One or more Jenkins builds succeeded."

      # ðŸ”¥ Test Alert Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„
      - name: test-alerts
        groups:
          - name: test.rules
            rules:
              - alert: TestEmail
                expr: vector(1)
                for: 1m
                labels:
                  severity: critical
                annotations:
                  summary: "Test Alert"
                  description: "This is a test alert to check email notifications."

    storageSpec:
      emptyDir: {}

# ===============================
# Node Exporter
# ===============================
nodeExporter:
  enabled: true

# ===============================
# kube-state-metrics
# ===============================
kubeStateMetrics:
  enabled: true

# ===============================
# Alertmanager
# ===============================
alertmanager:
  enabled: true
  config:
    global:
      resolve_timeout: 5m
      smtp_smarthost: 'smtp.gmail.com:587'
      smtp_from: 'mernathawy211@gmail.com'
      smtp_auth_username: 'mernathawy211@gmail.com'
      smtp_auth_password: 'tbqe zwqb eigo vupk'  # Ø§Ø³ØªØ¨Ø¯Ù„ÙŠ Ø¨ÙƒÙ„Ù…Ø© Ø³Ø± App Password Ù…Ù† Ø¬ÙŠÙ…ÙŠÙ„
      smtp_require_tls: true

    route:
      receiver: email-alert
      group_by: ['alertname']
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 12h

    receivers:
      - name: email-alert
        email_configs:
          - to: 'mernathawy211@gmail.com'
            send_resolved: true

